■━ [C#プログラミングレッスン] ━━━━━━━━━━━━━━━ No.328 ━□

「プログラム書法編」-- コメント(1)
                                                           by Gushwell  
□━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━■

プログラムコードを理解する際の手助けする適切に書かれたコメントは、プログラ
ムを読むときの助けになります。
一方、コードの内容とコメントの内容が違っていたりすると、理解の妨げになり、
機能修正、機能追加する際に、バグを作りこむ危険があります。
コメントの良し悪しが、コードの品質を左右する場合がありますので、動作に影響
しないたかがコメントといっても、いい加減に扱うことはできません。

今回は、コメントの書き方について考えてみたいと思います。


■□───────────────────────────────────
■□ コメントには分かりきったことは書かなくても良い。

例えば、以下のようなコメントは、無意味であり、たんなる時間の浪費に過ぎませ
ん。

count = 0;    // ゼロクリア

while (true) {    // 無限ループ

if (c == ':') {    // コロンなら

return null;     // nullを返す

ver board = new Board(8,8);   // インスタンス生成

これらのコメントは、コードの同語反復にすぎず、わかりきった情報なので、書く
意味がありません。


■□───────────────────────────────────
■□ わかりにくいコードにコメントをつけるならばコードを直したほうが良い。

コメントを書くことは大切なことですが、わかりにくいコードに、一生懸命コメン
トを書くのなら、その労力をわかりやすいコードを書くほうに振り向けたほうが良
いと思います。
特に、変数名、メソッド名にうまい名前を付ければ、多くのコメントは不要になり
ます。

例えば、最初の処理を特別扱いしたい場合に、

// 最初の処理かどうかを判断するための変数
bool jugement;

というコードだと変数名からだけだと、何を判断する変数なのかがわからないため、
コメントをつける必要がありますが、次のような変数名にすれば、コメントは不要
とまります。

bool isFirst;

また、次のようなコメントも、名前を適切につければ不要になります。

// クリップボードにイメージが含まれていれば
if (cb.CkImg()) {

次のようなメソッド名ならば、コメントは不要です。

if (clipboard.ContainsImamge()) {


■□───────────────────────────────────
■□ コードとコメントは同期させること

コメントを書いた時点では、そのコメントがコードと一致していたとしても、プロ
グラムの修正や機能追加が繰り返されると、コメントだけがその進化についてゆけ
ず、ほったらかしにされてしまうことがよくあります。
そうなると、コメントを信頼したために、バグを混入させてしまうということが起
こりえます。
コードを直したら、コメントも直す習慣をつけてください。

なお、極論かもしれませんが、コードとコメントの食い違いを極力減らすためには、
前述したようにわかりやすいコードを書き、コメントを不要にすることが重要だと
思います。

コメントを書くのに多大な労力をかけるのならば、その労力を、わかりやすいコー
ドを書くことに振り向けたほうがずっと良い、というのが私の考えです。


─────────────────────────────────────
『C#プログラミングレッスン』  (ほぼ週刊）                                 
☆皆さまからの感想をお待ちしています。http://gushwell.ifdef.jp/mail.html  
─────────────────────────────────────
Published by Gushwell.                                                    
 Copyright (C) 2012 Gushwell All rights reserved.                        
 Microsoft MVP for Visual C#(Apr 2005 - Mar 2013)                        

■Gushwell's Page                                                         
facebook Page                     : http://www.facebook.com/CSharpLesson  
Gushwell's C# Dev Notes           : http://gushwell.ldblog.jp/            
Gushwell's C# Programming Page    : http://gushwell.ifdef.jp/             
Gushwellの読書ノート              : http://gushwell.jugem.jp/             
Twitterアカウント                 : @gushwell                             
─────────────────────────────────────
